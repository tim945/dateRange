/*
* 日历组件
* by TommyShao <tomieric@gmail.com>
* v1.0.0
* www.frontpay.cn All Rights Reserved.
* under license MIT
* https://github.com/tomieric/dateRange#readme
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.DatePickerTimer=e(require("jquery")):t.DatePickerTimer=e(t.jQuery)}(this,function(t){return function(t){function e(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.src=h.p+""+t+"."+b+".hot-update.js",e.appendChild(i)}function i(t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var e=new XMLHttpRequest,i=h.p+""+b+".hot-update.json";e.open("GET",i,!0),e.timeout=1e4,e.send(null)}catch(a){return t(a)}e.onreadystatechange=function(){if(4===e.readyState)if(0===e.status)t(new Error("Manifest request to "+i+" timed out."));else if(404===e.status)t();else if(200!==e.status&&304!==e.status)t(new Error("Manifest request to "+i+" failed."));else{try{var a=JSON.parse(e.responseText)}catch(n){return void t(n)}t(null,a)}}}function a(t){function e(t,e){"ready"===k&&o("prepare"),T++,h.e(t,function(){function i(){T--,"prepare"===k&&(C[t]||c(t),0===T&&0===_&&l())}try{e.call(null,a)}finally{i()}})}var i=M[t];if(!i)return h;var a=function(e){return i.hot.active?M[e]?(M[e].parents.indexOf(t)<0&&M[e].parents.push(t),i.children.indexOf(e)<0&&i.children.push(e)):x=[t]:(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),x=[]),h(e)};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&(u?Object.defineProperty(a,n,function(t){return{configurable:!0,enumerable:!0,get:function(){return h[t]},set:function(e){h[t]=e}}}(n)):a[n]=h[n]);return u?Object.defineProperty(a,"e",{enumerable:!0,value:e}):a.e=e,a}function n(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(t,i){if("undefined"==typeof t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var a=0;a<t.length;a++)e._acceptedDependencies[t[a]]=i;else e._acceptedDependencies[t]=i},decline:function(t){if("undefined"==typeof t)e._selfDeclined=!0;else if("number"==typeof t)e._declinedDependencies[t]=!0;else for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:s,apply:p,status:function(t){return t?void w.push(t):k},addStatusHandler:function(t){w.push(t)},removeStatusHandler:function(t){var e=w.indexOf(t);e>=0&&w.splice(e,1)},data:$[t]};return e}function o(t){k=t;for(var e=0;e<w.length;e++)w[e].call(null,t)}function r(t){var e=+t+""===t;return e?+t:t}function s(t,e){if("idle"!==k)throw new Error("check() is only allowed in idle status");"function"==typeof t?(D=!1,e=t):(D=t,e=e||function(t){if(t)throw t}),o("check"),i(function(t,i){if(t)return e(t);if(!i)return o("idle"),void e(null,null);O={},j={},C={};for(var a=0;a<i.c.length;a++)j[i.c[a]]=!0;g=i.h,o("prepare"),y=e,m={};var n=0;c(n),"prepare"===k&&0===T&&0===_&&l()})}function d(t,e){if(j[t]&&O[t]){O[t]=!1;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(m[i]=e[i]);0===--_&&0===T&&l()}}function c(t){j[t]?(O[t]=!0,_++,e(t)):C[t]=!0}function l(){o("ready");var t=y;if(y=null,t)if(D)p(D,t);else{var e=[];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&e.push(r(i));t(null,e)}}function p(e,i){function a(t){for(var e=[t],i={},a=e.slice();a.length>0;){var o=a.pop(),t=M[o];if(t&&!t.hot._selfAccepted){if(t.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var r=0;r<t.parents.length;r++){var s=t.parents[r],d=M[s];if(d.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+s);e.indexOf(s)>=0||(d.hot._acceptedDependencies[o]?(i[s]||(i[s]=[]),n(i[s],[o])):(delete i[s],e.push(s),a.push(s)))}}}return[e,i]}function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];t.indexOf(a)<0&&t.push(a)}}if("ready"!==k)throw new Error("apply() is only allowed in ready status");"function"==typeof e?(i=e,e={}):e&&"object"==typeof e?i=i||function(t){if(t)throw t}:(e={},i=i||function(t){if(t)throw t});var s={},d=[],c={};for(var l in m)if(Object.prototype.hasOwnProperty.call(m,l)){var p=r(l),f=a(p);if(!f){if(e.ignoreUnaccepted)continue;return o("abort"),i(new Error("Aborted because "+p+" is not accepted"))}if(f instanceof Error)return o("abort"),i(f);c[p]=m[p],n(d,f[0]);for(var p in f[1])Object.prototype.hasOwnProperty.call(f[1],p)&&(s[p]||(s[p]=[]),n(s[p],f[1][p]))}for(var u=[],v=0;v<d.length;v++){var p=d[v];M[p]&&M[p].hot._selfAccepted&&u.push({module:p,errorHandler:M[p].hot._selfAccepted})}o("dispose");for(var y=d.slice();y.length>0;){var p=y.pop(),D=M[p];if(D){for(var w={},_=D.hot._disposeHandlers,T=0;T<_.length;T++){var C=_[T];C(w)}$[p]=w,D.hot.active=!1,delete M[p];for(var T=0;T<D.children.length;T++){var O=M[D.children[T]];if(O){var j=O.parents.indexOf(p);j>=0&&O.parents.splice(j,1)}}}}for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))for(var D=M[p],E=s[p],T=0;T<E.length;T++){var P=E[T],j=D.children.indexOf(P);j>=0&&D.children.splice(j,1)}o("apply"),b=g;for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(t[p]=c[p]);var H=null;for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)){for(var D=M[p],E=s[p],S=[],v=0;v<E.length;v++){var P=E[v],C=D.hot._acceptedDependencies[P];S.indexOf(C)>=0||S.push(C)}for(var v=0;v<S.length;v++){var C=S[v];try{C(s)}catch(R){H||(H=R)}}}for(var v=0;v<u.length;v++){var A=u[v],p=A.module;x=[p];try{h(p)}catch(R){if("function"==typeof A.errorHandler)try{A.errorHandler(R)}catch(R){H||(H=R)}else H||(H=R)}}return H?(o("fail"),i(H)):(o("idle"),void i(null,d))}function h(e){if(M[e])return M[e].exports;var i=M[e]={exports:{},id:e,loaded:!1,hot:n(e),parents:x,children:[]};return t[e].call(i.exports,i,i.exports,a(e)),i.loaded=!0,i.exports}var f=this.webpackHotUpdateDatePickerTimer;this.webpackHotUpdateDatePickerTimer=function(t,e){d(t,e),f&&f(t,e)};var u=!1;try{Object.defineProperty({},"x",{get:function(){}}),u=!0}catch(v){}var y,m,g,D=!0,b="fd3611bec0ac566803ef",$={},x=[],w=[],k="idle",_=0,T=0,C={},O={},j={},M={};return h.m=t,h.c=M,h.p="",h.h=function(){return b},a(0)(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){function a(){d("."+l).hide().parent().removeClass("active")}function n(t,e){this.$el=d(t),this.options=d.extend({},n.DEAFULTS,e),this.endDate="",this.uuid="C"+Math.random().toString(36).slice(-8)+"_",this.init()}function o(t){return t=t?t:"{}",new Function("return "+t)()}function r(t){var e=[].slice.call(arguments,1);return d(this).each(function(){var i=d(this),a=i.data("datetimepicker"),r=o(i.data("option")),s={};a||(s=d.extend({},r,"object"==typeof t?t:{}),i.data("datetimepicker",a=new n(i,s))),"string"==typeof t&&a[t].apply(a,e)})}function s(t){r.call(this,"show"),t.stopPropagation()}i(2);var d=i(10),c='[data-toggle="datetimepicker"]',l="datetimepicker",p=function(t){return t>9?t:"0"+t};n.prototype.init=function(){this.periodObj={},this.periodObj.today=0,this.periodObj.yesterday=1,this.periodObj.aRecent7Days=6,this.periodObj.aRecent14Days=13,this.periodObj.aRecent30Days=29,this.render();var t=this.$el.position(),e=this.$el.outerHeight();this.$calendar.css({top:e+"px",left:t.left+"px"}),this.$header=this.$calendar.find(".datetimepicker-header"),this.periodBtns=this.$header.find(".datetimepicker-btn"),this.$body=this.$calendar.find(".datetimepicker-body"),this.$footer=this.$calendar.find(".datetimepicker-footer"),this.$start=this.$footer.find('[data-action="start"]'),this.$end=this.$footer.find('[data-action="end"]'),this.$confirmBtn=this.$footer.find('[data-action="ok"]'),this.$cancelBtn=this.$footer.find('[data-action="cancel"]'),this.options.period||this.$header.hide()&&this.$footer.hide(),this.__setDefaultValue();var i=0,a=this.options.names;for(a.length>2?2:a.length;i<2;i++)this[0===i?"$start":"$end"].prop("name",a[i]);1===this.options.calendars&&this.options.period&&(this.$cancelBtn.hide(),this.periodBtns.eq(1).hide()),this.__listenEvent()},n.prototype.__setDefaultValue=function(){var t,e=this,i=d.trim(e.$el.val()),a=[],n="";""===i?t=n=e.date2ymd(new Date):i.indexOf(e.options.defaultText)>-1?(a=i.split(e.options.defaultText),2===a.length?e.compareStrDate(a[0],a[1])<0?(t=e.formatDate(a[0]),n=e.formatDate(a[1])):(t=e.formatDate(a[1]),n=e.formatDate(a[0])):t=n=e.formatDate(a[0])):t=n=e.formatDate(d.trim(e.$el.val())),e.setValue(t,n)},n.prototype.setValue=function(t,e,i){this.options.period?(i&&(t!==e&&(t=e=i),this.compareStrDate(i,t)<0?t=i:this.compareStrDate(e,i)<0&&(e=i)),this.$el.val([t,this.options.defaultText,e].join("")),this.endDate=e,this.$end.val(e)):(this.$el.val(t),this.$end.val(t),this.endDate=t),this.$start.val(t)},n.prototype.render=function(){var t=this.options.template?this.options.template:n.TEMPLATE.join("");this.$calendar=d(t),this.$el.after(this.$calendar)},n.prototype.renderCalendar=function(){var t,e=0,i=this.options.calendars,a=this.str2date(this.endDate);for(this.$body.empty();e<i;e++)t=this.fillDate(a.getFullYear(),a.getMonth(),e),0===e?this.$body.append(t):this.$body.prepend(t),a.setMonth(a.getMonth()-1,1);this.__addCss(),this.__setPosition()},n.prototype.__addCss=function(){var t=this.$start.val(),e=this.$end.val(),i=this.str2date(t),a=this.str2date(e),n=this.date2ymd,o=this.uuid,r=this.options.period?"selected":"active";this.$body.find("td").removeClass("selected first last active");for(var s=i;s.getTime()<=a.getTime();s.setDate(s.getDate()+1))d("#"+o+n(s)).addClass(r);this.options.period&&(d("#"+o+t).addClass("first"),d("#"+o+e).addClass("last"))},n.prototype.__setPosition=function(){var t=this.$el.offset(),e=d(window).scrollTop(),i=d(window).height(),a=this.$el.outerHeight(),n=this.$calendar[0].offsetHeight;t.top-e-n<0?this.$calendar.css("top",a+"px"):t.top-e+n>=i?this.$calendar.css("top",-n+"px"):this.$calendar.css("top",a+"px")},n.prototype.__listenEvent=function(){var t=this;this.$el.on("focus",d.proxy(this.show,this)),this.$cancelBtn.on("click",d.proxy(this.close,this)),this.$confirmBtn.on("click",d.proxy(this.confirmSelect,this)),this.$calendar.on("click",function(t){return t.stopPropagation(),!1}),this.$el.on("click",function(e){return t.show(),e.stopPropagation(),!1}),this.$calendar.on("click","[data-date]",function(){t.activeDate(this),t.selectDate(d(this).attr("data-date"))}),this.$calendar.on("click","[data-day]",function(){t.selectPeriod(d(this)),t.selectDate(),t.__togglePeriodBtn(d(this))}),this.$calendar.on("click",'[data-action="prevMonth"]',function(){t.tab(-1)}),this.$calendar.on("click",'[data-action="nextMonth"]',function(){t.tab(1)});var e=function(){t.$calendar.find(".datetimepicker-dropdown").removeClass("active")};this.$calendar.on("click",".datetimepicker-dropdown",function(i){var a=d(this).attr("data-type"),n=d(this).attr("data-index");e(),t.dropDown(this,a,n),i.stopPropagation()}),this.$calendar.on("click.hideDropdown",e),this.$calendar.on("click.setDate",".datetimepicker-dropdown li",function(){t.selectYMD(this)}),d(document).on("click.hide.datetimepicker",d.proxy(this.close,this))},n.prototype.selectPeriod=function(t){var e,i=d(t),a=i.attr("data-day");a=this.periodObj[a],e=this.getSpecialPeriod(a),this.$end.val(e.today),this.$start.val(e.otherday),this.endDate=e.today},n.prototype.__togglePeriodBtn=function(t){this.periodBtns.removeClass("active"),t&&d(t).addClass("active")},n.prototype.getSpecialPeriod=function(t){var e=this,i=new Date;1==e.options.isTodayValid&&""!=e.options.isTodayValid||2>t?"":i.setTime(i.getTime()-864e5);var a=i.getTime()-24*t*60*60*1e3<1e3*e.options.minValidDate?1e3*e.options.minValidDate:i.getTime()-24*t*60*60*1e3,n=i.getFullYear()+"-"+p(i.getMonth()+1)+"-"+p(i.getDate());i.setTime(a);var o=i.getFullYear()+"-"+p(i.getMonth()+1)+"-"+p(i.getDate());return t==e.periodObj.aYesterday&&(n=o),{today:n,otherday:o}},n.prototype.checkDateRange=function(t,e){var i,a=this.str2date(t),n=this.str2date(e),o=a.getTime(),r=n.getTime();return i=r>=o?(r-o)/1e3/60/60/24:(o-r)/1e3/60/60/24,!(i>this.options.dayRangeMax)||(alert("最大时间跨度不能大于："+this.options.dayRangeMax),!1)},n.prototype.selectDate=function(t){var e=d.Event("choose.ui.datetimepicker"),i=this.$start.val(),a=this.$end.val();this.options.period&&t?(this.setValue(i,a,t),this.__addCss(),this.__togglePeriodBtn()):(t||(t=i),this.setValue(t,a),this.$el.trigger(e,[t,a]),"function"==typeof this.options.success&&this.options.success(t,a),this.close())},n.prototype.confirmSelect=function(){var t=this,e=this.$start.val(),i=this.$end.val();t.checkDateRange(e,i)||(e=i=t.date2ymd(new Date),this.$start.val(e),this.$end.val(i)),t.selectDate()},n.prototype.activeDate=function(t){this.$calendar.find("td.active").removeClass("active"),d(t).addClass("active")},n.prototype.tab=function(t){var e=this.str2date(this.endDate);e.setMonth(e.getMonth()+t,1),this.endDate=this.date2ymd(e),this.renderCalendar()},n.prototype.show=function(){var t=d.Event("show.ui.datetimepicker");a(),this.renderCalendar(),this.$calendar.show().addClass("active"),this.__setPosition(),this.$el.trigger(t).parent().addClass("active")},n.prototype.close=function(){var t=d.Event("close.ui.datetimepicker");this.$calendar.hide().removeClass("active"),this.endDate=this.$end.val(),this.$el.trigger(t).parent().removeClass("active")},n.prototype.setMaxDate=function(t){this.options.max=this.formatDate(t)||this.options.max},n.prototype.setMinDate=function(t){this.options.min=this.formatDate(t)||this.options.min},n.prototype.setOption=function(t,e){this.options=d.extend({},this.options,t),e&&this.renderCalendar()},n.prototype.dropDown=function(t,e,i){var a=d(t).find("ul"),n=["<ul>","</ul>"],o=(this.str2date(this.endDate),this.options.max.slice(0,4)||(new Date).getFullYear()+3),r=this.str2date(this.options.min).getFullYear(),s=d(t).attr("data-value"),c=1;if(!a.length){if("month"===e)for(;c<=12;c++)n.splice(-1,-1,'<li data-type="m" data-index="'+i+'"'+(c==s?' class="active"':"")+">"+c+"</li>");else for(c=o;c>=r;c--)n.splice(-1,-1,'<li data-type="y" data-index="'+i+'"'+(c==s?' class="active"':"")+">"+c+"</li>");a=d(n.join("")),d(t).append(a)}d(t).addClass("active")},n.prototype.selectYMD=function(t){var e=d(t),i=e.attr("data-type"),a=e.attr("data-index"),n=this.endDate,o=e.text();o=o>9?o:"0"+o,n="y"===i?n.replace(/(\d{1,4})-(\d{1,2})-(\d{1,2})/g,o+"-$2-01"):n.replace(/(\d{1,4})-(\d{1,2})-(\d{1,2})/g,"$1-"+o+"-$2-01"),n=this.str2date(n),"y"===i?n.setDate(n.getMonth()):n.setMonth(0==a?n.getMonth():n.getMonth()+this.options.calendars-1,1),this.endDate=this.date2ymd(n),this.renderCalendar()},n.prototype.fillDate=function(t,e,i){var a=this,n=new Date(t,e,1),o=new Date(t,e,1),r=o.getDay();o.setDate(1-r);var s=new Date(t,e+1,0),c=new Date(t,e+1,0);r=c.getDay(),c.setDate(c.getDate()+6-r);var l=new Date,p=l.getDate(),h=l.getMonth(),f=l.getFullYear(),u=document.createElement("table"),v=document.createElement("caption");d(v).append('<div class="datetimepicker-dropdown" data-type="year" data-index="'+i+'" data-value="'+t+'">'+t+'<i class="icon-chevron-thin-down"></i></div>年<div class="datetimepicker-dropdown" data-type="month" data-index="'+i+'" data-value="'+(e+1)+'">'+(e+1)+'<i class="icon-chevron-thin-down"></i></div>月'),d(u).append(v);for(var y=document.createElement("thead"),m=document.createElement("tr"),g=["日","一","二","三","四","五","六"],D=0,b="";D<7;D++)b+="<th>"+g[D]+"</th>";d(m).html(b),d(y).append(m),d(u).append(y),m=document.createElement("tr");var $=document.createElement("td");0==i&&d($).append('<a href="javascript:void(0);" class="datetimepicker-next-month" data-action="nextMonth"><i class="icon-chevron-thin-right"></i></a>'),i+1==this.options.calendars&&d($).append('<a href="javascript:void(0);" class="datetimepicker-prev-month" data-action="prevMonth"><i class="icon-chevron-thin-left"></i></a>'),d($).attr("colSpan",7).css({"text-align":"center",height:"0px"}),d(m).append($),d(u).append(m);for(var x="",w=0,k="",_=o;_.getTime()<=c.getTime();_.setDate(_.getDate()+1)){if(_.getTime()<n.getTime())x="disabled",w="-1";else if(_.getTime()>s.getTime())x="disabled",w="1";else if(1==this.options.stopToday&&_.getTime()>l.getTime()||_.getTime()<a.str2date(a.options.min)||""!==a.str2date(a.options.max)&&_.getTime()>a.str2date(a.options.max))x="disabled",w="2";else{if(w="0",_.getDate()==p&&_.getMonth()==h&&_.getFullYear()==f?1==this.options.isTodayValid?x="today":(x="disabled",w="2"):x="",!this.options.weekendDis||6!=_.getDay()&&0!=_.getDay()||(x="disabled",w="3"),this.options.disCertainDay&&this.options.disCertainDay.length>0)for(var T in this.options.disCertainDay)isNaN(this.options.disCertainDay[T])||_.getDay()!==this.options.disCertainDay[T]||(x="disabled",w="4");if(this.options.disCertainDate&&this.options.disCertainDate.length>0){var C=!1;for(var T in this.options.disCertainDate)if(!isNaN(this.options.disCertainDate[T])||isNaN(parseInt(this.options.disCertainDate[T])))if(this.options.disCertainDate[0]===!0){if(C=!(_.getDate()===this.options.disCertainDate[T]),!C)break}else if(C=!(_.getDate()!==this.options.disCertainDate[T]))break;C&&(x="disabled",w="4")}}0==_.getDay()&&(m=document.createElement("tr")),$=document.createElement("td"),$.innerHTML=_.getDate(),""!=x&&d($).attr("class",x),0==w&&(k=a.date2ymd(_),d($).attr({"data-date":k,id:this.uuid+k}).css("cursor","pointer")),d(m).append($),6==_.getDay()&&d(u).append(m)}return u},n.prototype.str2date=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])},n.prototype.compareStrDate=function(t,e){var i=this.str2date(t),a=this.str2date(e);return i.getTime()>a.getTime()?1:i.getTime()==a.getTime()?0:-1},n.prototype.date2ymd=function(t){return[t.getFullYear(),p(t.getMonth()+1),p(t.getDate())].join("-")},n.prototype.formatDate=function(t){return t.replace(/(\d{4})\-(\d{1,2})\-(\d{1,2})/g,function(t,e,i,a){return i<10&&(i="0"+parseInt(i,10)),a<10&&(a="0"+parseInt(a,10)),e+"-"+i+"-"+a})},n.DEAFULTS={period:!1,defaultText:" 至 ",calendars:2,dayRangeMax:366,isTodayValid:!0,min:"1970-01-01",max:"",names:[],stopToday:!1,weekendDis:!1,disCertainDay:[],disCertainDate:[],success:d.noop},n.TEMPLATE=['<div class="'+l+' clearfix">','<div class="'+l+'-header">','<button type="button" class="'+l+'-btn" data-day="today">今天</button>','<button type="button" class="'+l+'-btn" data-day="yesterday">2天</button>','<button type="button" class="'+l+'-btn" data-day="aRecent7Days">7天</button>','<button type="button" class="'+l+'-btn" data-day="aRecent14Days">14天</button>','<button type="button" class="'+l+'-btn" data-day="aRecent30Days">30天</button>',"</div>",'<div class="'+l+'-body clearfix">',"</div>",'<div class="'+l+'-footer clearfix">','<div class="'+l+'-msg">','<div class="form-smaller">','<input type="text" class="form-control" data-action="start" readonly />','<span class="'+l+'-msg-line"> - </span>','<input type="text" class="form-control" data-action="end" readonly /><br />',"</div>","</div>",'<div class="'+l+'-btns">','<button type="button" class="btn primary small-btn" data-action="ok" type="button">确定</button>','<button type="button" class="btn default small-btn" data-action="cancel" type="button">取消</button>',"</div>","</div>","</div>"],d.fn.datetimepicker=r,d.fn.datetimepicker.constructor=n,d(function(){d(document).on("click.datetimepicker",c,s),d(document).on("click.datetimepicker",".form-control-date-btn",function(t){var e=d(this).siblings(c);e.length&&s.call(e,t)})}),t.exports=n},function(t,e){},,,,,,,,function(e,i){e.exports=t}])});